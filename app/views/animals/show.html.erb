<body>
  <h1><%= @animal.name %></h1>

  <div class="photo">
  <span><%= image_tag (@animal.photo) %></span>
  </div>

  <h2><%=@animal.name%> Facts</h2>

  <h3>Description</h3>
  <div class="animal description">
    <p><%= @animal.description %></p>

    <h3>Scientific Name</h3>
    <p><%= @animal.scientific_name%></p>

    <h3>Family Name</h3>
    <p><%= @animal.family_name %></p>

    <h3>Classification</h3>
    <p><%= @animal.classification %></p>

    <h3>Diet</h3>
    <p><%= @animal.diet %></p>

    <h3>Life Span</h3>
    <p><%= @animal.life_span %></p>

    <h3>Habitat</h3>
    <p><%= @animal.habitat %></p>

    <h3>Comments</h3>
    <% @animal.comments.each do |comment| %>
      <p>
        <strong><%= comment.user.username %></strong> <br>
        <%= comment.comment %>
      </p>
    <% end %>

    <% if current_user != nil %>

     <div class="like">
      <%= form_for @favorite_animal do |f| %>
        <%= f.hidden_field :animal_id, :value => @animal.id %>
        <%= f.hidden_field :user_id, :value => current_user.id %>
       <span><%=f.submit "Likes" %>
       <% end %>
       <%= @animal.favorite_animals.count%></span>
       </div>

     <% if @user.admin == true %>
       <%= button_to "Edit", edit_animal_path, method: :get %>
       <%= button_to "Remove", @animal, method: :delete %>
     <% end %>

     <div class="comment">
       <%= form_for @comment do |f| %>
         <p><%= f.text_area :comment, placeholder: "Enter a comment" %><br>
           <%= f.hidden_field :user_id, :value => current_user.id %>
           <%= f.hidden_field :animal_id, :value => @animal.id %>
         <%= f.submit %></p>
       <% end %>
     </div>
     <div class="bookmark">
       <%= form_for @save do |f| %>
        <%= f.hidden_field :animal_id, :value => @animal.id %>
        <%= f.hidden_field :user_id, :value => current_user.id %>
        <span><%=f.submit "Bookmark" %>
        <% end %>


        <%= form_tag charges_path do %>
          <article>
            <% if flash[:error].present? %>
              <div id="error_explanation">
                <p><%= flash[:error] %></p>
              </div>
            <% end %>
            <strong>Adopt a <%= @animal.name %></strong>
          </article>
          <script src="https://js.stripe.com/v3/"></script>
          <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
              data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
              data-description="Adopt"
              data-amount="2500"
              data-locale="auto"></script>
        <% end %>


     </div>

     <% else %>
     <div class="cannot comment">
       <p>You must sign in to comment</p>
     </div>
   <% end %>

  </div>

</body>
